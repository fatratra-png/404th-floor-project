<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Floor 3 // Emergency Brake</title>
    <link rel="stylesheet" href="src/styles/output.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Orbitron:wght@400;700;900&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&amp;display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link rel="stylesheet" href="src/styles/floor3.css" />
    <link rel="stylesheet" href="src/styles/floor2.css" />
    <script id="tailwind-config">
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              primary: "#135bec",
              "background-light": "#f6f6f8",
              "background-dark": "#0a0f16",
              "terminal-green": "#0f0",
              surface: "#192233",
              "surface-highlight": "#232d42",
            },
            fontFamily: {
              display: ["Space Grotesk", "sans-serif"],
              mono: ["Courier New", "Courier", "monospace"],
            },
            borderRadius: {
              DEFAULT: "0.25rem",
              lg: "0.5rem",
              xl: "0.75rem",
              full: "9999px",
            },
            backgroundImage: {
              "glitch-pattern":
                "url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0IiBoZWlnaHQ9IjQiPgo8cmVjdCB3aWR0aD0iNCIgaGVpZ2h0PSI0IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9IjAuMSIvPgo8cGF0aCBkPSJNMSAzdjFIMVYzTTEgMXYxSDFWMSIgZmlsbD0icmdiYSgyNTUsMjU1LDI1NSwwLjApIi8+Cjwvc3ZnPg==')",
            },
          },
        },
      };
    </script>
  </head>

  <body>
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       TOPBAR
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="floor3-topbar">
      <div class="topbar-left">
        <span class="topbar-icon">âš </span>
        <div>
          <div class="topbar-title">FLOOR 3 // EMERGENCY MODE</div>
        </div>
      </div>
      <div class="topbar-right">
        <div class="conn-badge">
          <div class="conn-dot"></div>
          CONNECTION UNSTABLE
        </div>
        <button class="icon-btn" title="Help">?</button>
        <button
          class="icon-btn"
          title="Settings"
          onclick="Sounds && Sounds.toggleMute()"
        >
          âš™
        </button>
      </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       MAIN GRID
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="floor3-root">
      <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€ RIGHT: GAUGE PANEL â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
      <div id="gauge-panel">
        <!-- Metrics row -->
        <div class="metrics-row">
          <div class="metric-card">
            <div class="metric-card-label">DECELERATION</div>
            <div class="metric-card-value">
              -9.8
              <span class="metric-card-unit">m/sÂ²</span>
            </div>
          </div>
          <div class="metric-card">
            <div class="metric-card-label">VELOCITY</div>
            <div
              id="f3-velocity"
              class="metric-card-value"
              style="font-size: 1rem; color: var(--red)"
            >
              CRITICAL
            </div>
          </div>
        </div>

        <!-- Hydraulic gauge -->
        <div class="gauge-container">
          <div class="gauge-title">HYDRAULIC PRESSURE</div>

          <div class="gauge-track-wrapper">
            <!-- Y-axis labels -->
            <div class="gauge-y-axis">
              <span>100%</span>
              <span>90%</span>
              <span>80%</span>
              <span>70%</span>
              <span>60%</span>
              <span>50%</span>
              <span>40%</span>
              <span>30%</span>
              <span>20%</span>
              <span>10%</span>
              <span>0%</span>
            </div>

            <!-- Bar track -->
            <div class="gauge-bar-track">
              <!-- Ticks -->
              <div class="gauge-ticks">
                <div class="gauge-tick"></div>
                <div class="gauge-tick"></div>
                <div class="gauge-tick"></div>
                <div class="gauge-tick"></div>
                <div class="gauge-tick"></div>
                <div class="gauge-tick"></div>
                <div class="gauge-tick"></div>
                <div class="gauge-tick"></div>
                <div class="gauge-tick"></div>
                <div class="gauge-tick"></div>
              </div>

              <!-- Target line at 88% from bottom -->
              <div class="gauge-target-line"></div>
              <div class="gauge-target-label">TARGET PRESSURE</div>

              <!-- Safe zone label -->
              <div class="safe-zone-label">SAFE ZONE</div>

              <!-- Lock icon top right -->
              <div class="gauge-lock">ðŸ”’</div>

              <!-- Danger icon bottom right -->
              <div class="gauge-danger">â–²</div>

              <!-- THE BAR -->
              <div id="f3-gauge-bar"></div>
            </div>
          </div>

          <!-- Status bar -->
          <div class="gauge-status-bar">
            <div class="pressure-readout">
              <div class="pressure-big" id="f3-pressure-label">0</div>
              <div class="pressure-pct">%</div>
            </div>
            <div
              id="f3-status-right"
              style="
                font-size: 0.65rem;
                color: var(--red);
                letter-spacing: 0.1em;
              "
            >
              UNSTABLE
            </div>
          </div>
        </div>

        <!-- Bottom label -->
        <div
          style="
            font-size: 0.6rem;
            color: #334155;
            letter-spacing: 0.15em;
            text-align: center;
            padding: 0.25rem 0;
          "
        >
          HYDRAULIC PRESSURE
          <span
            id="f3-status-badge"
            style="color: var(--red); margin-left: 0.5rem"
            >UNSTABLE</span
          >
        </div>
      </div>
      <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€ LEFT: BRAKE MECHANISM â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
      <div id="brake-panel">
        <!-- Alert banner -->
        <div id="f3-alert">
          <span>âš </span>
          <span>âš  &nbsp; CRITICAL FREEFALL DETECTED &nbsp; âš </span>
          <span>âš </span>
        </div>

        <!-- Brake visual -->
        <div class="brake-wrapper">
          <!-- The big red button -->
          <button id="f3-tap-btn" title="MASH THIS">BRAKE</button>

          <!-- Shaft -->
          <div class="brake-shaft"></div>

          <!-- Base plate -->
          <div class="brake-base">MANUAL OVERRIDE</div>
        </div>

        <!-- CTA -->
        <div class="cta-box">
          <div class="cta-label">MANUAL OVERRIDE</div>
          <div class="cta-key">
            <span>âŒ¨</span>
            MASH SPACE
          </div>
          <div class="cta-hint">Repeatedly press to build pressure</div>
        </div>

        <!-- Status & sustain -->
        <div id="f3-status">AWAITING INPUT...</div>
        <div class="sustain-track">
          <div id="f3-sustain-bar"></div>
        </div>

        <!-- Bottom ticker -->
        <div class="bottom-ticker">
          <div class="ticker-alert">
            <div class="ticker-dot"></div>
            SYSTEM ALERT: Impact imminent in 00:15...
          </div>
          <div>ERR_CODE: 404_GRAVITY_NOT_FOUND</div>
        </div>
      </div>
      <aside
        class="w-full md:w-80 lg:w-96 h-auto md:min-h-screen bg-panel-dark border-l border-[#232f48] shadow-2xl z-20 flex flex-col relative overflow-hidden"
      >
        <div
          class="absolute inset-0 bg-brushed-metal opacity-50 pointer-events-none"
        ></div>
        <!-- Panel Header -->
        <div
          class="p-6 border-b border-[#232f48] bg-[#151a25]/50 backdrop-blur"
        >
          <h2 class="text-white text-xl font-bold tracking-tight">
            CONTROL PANEL
          </h2>
          <div class="flex items-center gap-2 mt-2">
            <div class="h-1.5 flex-1 bg-slate-700 rounded-full overflow-hidden">
              <div class="h-full bg-red-500 w-[35%] animate-pulse"></div>
            </div>
            <span class="text-xs text-red-400 font-mono">PWR: 35%</span>
          </div>
        </div>
        <!-- Floor Buttons -->
        <div
          class="flex-1 overflow-y-auto p-6 flex flex-col gap-6 items-center justify-center"
        >
          <!-- Floor 4 (Current) -->
          <div class="w-full flex items-center justify-between gap-4 group">
            <div class="text-right flex-1">
              <div class="text-sm font-bold text-slate-300">
                Executive Suite
              </div>
              <div class="text-xs text-red-400 font-mono">ACCESS DENIED</div>
            </div>
            <button
              class="relative w-16 h-16 rounded-lg bg-panel-dark border border-red-500/50 shadow-neon flex items-center justify-center group-hover:scale-105 transition-transform"
            >
              <div
                class="absolute inset-0 bg-red-500/10 animate-pulse rounded-lg"
              ></div>
              <span class="text-2xl font-bold text-red-500 font-mono z-10"
                >4</span
              >
            </button>
          </div>
          <!-- Separator -->
          <div class="w-12 h-px bg-slate-700/50"></div>
          <!-- Floor 3-->
          <div class="w-full flex items-center justify-between gap-4 group">
            <div class="text-right flex-1">
              <div class="text-sm font-bold text-primary">Server Room</div>
              <div class="text-xs text-primary/70 font-mono">ACTIVE</div>
            </div>
            <button
              class="w-16 h-16 rounded-lg bg-primary border border-primary shadow-neon-strong flex items-center justify-center transition-all hover:scale-105 active:scale-95 cursor-pointer"
            >
              <span
                class="text-2xl font-bold text-white font-mono drop-shadow-md"
                >3</span
              >
            </button>
          </div>
          <!-- Floor 2 -->
          <div class="w-full flex items-center justify-between gap-4 group">
            <div class="text-right flex-1">
              <div class="text-sm font-bold text-green-500">Access Terminal</div>
              <div class="text-xs text-green-500/70 font-mono">PASSED</div>
            </div>
            <button
              class="w-16 h-16 rounded-lg bg-green-600 border border-green-600 shadow-neon-strong flex items-center justify-center transition-all hover:scale-105 active:scale-95 cursor-pointer"
            >
              <span
                class="text-2xl font-bold text-white font-mono drop-shadow-md"
                >2</spand
              >
            </button>
          </div>
          <!-- Floor 1 -->
          <div class="w-full flex items-center justify-between gap-4 group">
            <div class="text-right flex-1">
              <div class="text-sm font-bold text-green-500">Lobby</div>
              <div class="text-xs text-green-500/70 font-mono">PASSED</div>
            </div>
            <button
              class="w-16 h-16 rounded-lg bg-green-600 border border-green-600 shadow-neon-strong flex items-center justify-center transition-all hover:scale-105 active:scale-95 cursor-pointer"
            >
              <span
                class="text-2xl font-bold text-white font-mono drop-shadow-md"
                >1</span
              >
            </button>
          </div>
        </div>
        <!-- Maintenance Panel -->
        <div class="p-6 border-t border-[#232f48] bg-[#0d111a]">
          <div class="flex flex-col gap-3">
            <div
              class="flex justify-between items-center text-xs text-slate-500 font-mono uppercase"
            >
              <span>Maintenance Mode</span>
              <span class="text-red-500">OFF</span>
            </div>
            <div class="grid grid-cols-4 gap-2">
              <div class="h-1 bg-primary/40 rounded-full"></div>
              <div class="h-1 bg-primary/40 rounded-full"></div>
              <div class="h-1 bg-slate-700 rounded-full"></div>
              <div class="h-1 bg-slate-700 rounded-full"></div>
            </div>
            <button
              class="mt-2 w-full py-3 bg-[#1a1f2e] hover:bg-[#232f48] border border-[#232f48] text-slate-300 text-xs font-bold uppercase tracking-widest rounded flex items-center justify-center gap-2 transition-colors"
            >
              <span class="material-symbols-outlined text-sm">build</span>
              Diagnostics
            </button>
          </div>
        </div>
        <!-- Key Slot / Card Reader -->
        <div
          class="absolute top-1/2 -left-3 w-6 h-24 bg-[#0d111a] border border-[#232f48] rounded-l-lg flex flex-col items-center justify-center gap-2 shadow-lg z-0"
        >
          <div
            class="w-1 h-16 bg-black rounded-full shadow-[inset_0_0_2px_rgba(255,255,255,0.2)]"
          ></div>
        </div>
      </aside>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       VICTORY OVERLAY
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="f3-complete-overlay">
      <div class="victory-title">âœ“ BRAKES ENGAGED</div>
      <div class="victory-sub">FLOOR 3 CLEARED â€” PROCEEDING TO FLOOR 4...</div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SCRIPTS
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <script src="src/audio/sounds.js"></script>
    <script src="src/floors/floor3.js"></script>

    <script src="src/floors/boot3.js"></script>
    <script src="main.js"></script>
  </body>
</html>
